<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Next Assignment Submission</title>

<!-- Bootstrap core CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"crossorigin="anonymous">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>
<body>
<nav class="navbar navbar-dark bg-dark navbar-static-top navbar-expand-md">
<div class="container">
<button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"> <span class="sr-only">Toggle navigation</span>
</button> <a class="navbar-brand" href="#">Next Assessment Submission</a>

<div class="collapse navbar-collapse justify-content-center" id="bs-example-navbar-collapse-1">

</div>
</div>
</nav>
<main>
<section class="py-5 text-center container">
<div class="row py-lg-5">
<div class="col-lg-6 col-md-8 mx-auto">

    <form action="/" method="post">
        <input type="date" class="form-control " name="date" />
        <br />
        <input type="time" class="form-control " name="time"/>
        <br />
        
        <button class="btn"
                type="submit">Get details</button>
    </form>

</div>
</div>

<table class="table">
  <thead>
  <tr>
    <th>Date</th>
    <th>Timestamp</th>
    <th>Location</th>
  </tr>
</thead>
<tbody>
  
<% if(typeof table_arr != 'undefined') { %>
    <% let i=0; %>
    <% while (i < table_arr.length) { %>
      <tr>
       <td> <%= table_arr[i].date %></td>
       <td> <%= table_arr[i].timestamp %></td>
       <td id="lat_<%=i%>"></td>
      </tr>          
    <%   i++;} %>
<% } %>
  
</tbody>
</table>


</section>
</main>
</body>
</html>






<% if(typeof url != 'undefined') { %>
  <script>

axios.get("<%=url%>")
  .then(function (response) {
    i=0;
    console.log(response.data.length);
    while(i<response.data.length){
      id_cell = "lat_"+i.toString();

      document.getElementById(id_cell).innerHTML = response.data[i].longitude+","+response.data[i].latitude;

    i++;
    }
  })
  .catch(function (error) {
    console.log(error);
  })
  .then(function () {
  });
  </script>
<% } %>


